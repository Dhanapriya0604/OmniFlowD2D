<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>OmniFlow D2D ‚Äî Supply Chain Intelligence</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=JetBrains+Mono:wght@300;400;500&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#07090f;--panel:#0c1220;--panel2:#111827;--border:#1a2744;
  --c0:#00d4ff;--c1:#7c3aed;--c2:#10b981;--c3:#f59e0b;--c4:#f43f5e;--c5:#06b6d4;
  --tx:#c9d1e0;--tx2:#64748b;--tx3:#e2e8f0;
  --font:'Outfit',sans-serif;--mono:'JetBrains Mono',monospace;--disp:'Bebas Neue',cursive;
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--tx);font-family:var(--font);font-size:13px;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,212,255,.008) 2px,rgba(0,212,255,.008) 4px);pointer-events:none;z-index:999}
.app{display:grid;grid-template-columns:220px 1fr;grid-template-rows:54px 1fr;height:100vh}

/* TOPBAR */
.topbar{grid-column:1/-1;background:var(--panel);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 20px;position:sticky;top:0;z-index:50}
.logo{font-family:var(--disp);font-size:1.55rem;letter-spacing:.12em;background:linear-gradient(90deg,#00d4ff,#7c3aed,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.badges{display:flex;gap:8px;align-items:center}
.badge{background:rgba(0,212,255,.09);border:1px solid rgba(0,212,255,.25);color:var(--c0);font-family:var(--mono);font-size:9.5px;padding:3px 9px;border-radius:4px;letter-spacing:.07em}
.badge.g{background:rgba(16,185,129,.09);border-color:rgba(16,185,129,.25);color:var(--c2)}
.badge.o{background:rgba(245,158,11,.09);border-color:rgba(245,158,11,.25);color:var(--c3)}
.live{width:7px;height:7px;border-radius:50%;background:var(--c2);box-shadow:0 0 8px var(--c2);animation:pulse 1.4s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.25}}
.topbar-r{display:flex;align-items:center;gap:14px}

/* SIDEBAR */
.sidebar{background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column;padding:16px 0;overflow-y:auto}
.sb-label{font-family:var(--mono);font-size:9px;letter-spacing:.15em;color:var(--tx2);padding:6px 14px 4px;text-transform:uppercase;margin-top:4px}
.nav{display:flex;align-items:center;gap:9px;padding:8px 14px;border-radius:0;cursor:pointer;color:var(--tx2);transition:all .15s;border-left:3px solid transparent;font-size:12.5px;font-weight:500}
.nav:hover{background:rgba(0,212,255,.05);color:var(--tx3)}
.nav.active{background:rgba(0,212,255,.08);color:var(--c0);border-left-color:var(--c0)}
.nav-ico{font-size:14px;width:18px;text-align:center}
.sb-div{height:1px;background:var(--border);margin:10px 14px}
.sb-stat{margin:0 12px 8px;background:var(--panel2);border:1px solid var(--border);border-radius:8px;padding:10px 12px}
.sb-stat-l{font-family:var(--mono);font-size:9px;color:var(--tx2);letter-spacing:.1em;text-transform:uppercase}
.sb-stat-v{font-family:var(--disp);font-size:1.25rem;margin-top:3px}
.sb-stat-s{font-size:10px;color:var(--tx2);margin-top:2px}
.sb-info{padding:0 14px;font-family:var(--mono);font-size:9.5px;color:var(--tx2);line-height:2.1}
.sb-info span{color:var(--tx)}

/* MAIN */
.main{overflow-y:auto;padding:20px;background:var(--bg)}
.module{display:none;animation:fi .22s ease}
.module.active{display:block}
@keyframes fi{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

/* SECTION HEADER */
.sec-h{display:flex;align-items:baseline;gap:12px;margin-bottom:18px;padding-bottom:12px;border-bottom:1px solid var(--border)}
.sec-t{font-family:var(--disp);font-size:1.7rem;letter-spacing:.07em;color:var(--tx3)}
.sec-s{font-family:var(--mono);font-size:9.5px;color:var(--tx2);letter-spacing:.12em;text-transform:uppercase}

/* KPI GRID */
.kpi-grid{display:grid;gap:10px;margin-bottom:18px}
.g6{grid-template-columns:repeat(6,1fr)}
.g4{grid-template-columns:repeat(4,1fr)}
.g5{grid-template-columns:repeat(5,1fr)}
.kpi{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:14px 16px;position:relative;overflow:hidden;transition:border-color .2s,transform .2s}
.kpi:hover{border-color:var(--c0);transform:translateY(-1px)}
.kpi::before{content:'';position:absolute;top:0;left:0;right:0;height:2.5px;background:var(--kc,var(--c0))}
.kpi-l{font-family:var(--mono);font-size:9px;color:var(--tx2);letter-spacing:.12em;text-transform:uppercase;margin-bottom:7px}
.kpi-v{font-family:var(--disp);font-size:1.6rem;color:var(--tx3);letter-spacing:.04em;line-height:1}
.kpi-d{font-size:10px;margin-top:5px;font-family:var(--mono)}
.up{color:var(--c2)} .dn{color:var(--c4)} .neu{color:var(--tx2)}

/* CHART GRIDS */
.cg{display:grid;gap:14px;margin-bottom:14px}
.g2{grid-template-columns:1fr 1fr}
.g21{grid-template-columns:1.5fr 1fr}
.g12{grid-template-columns:1fr 1.5fr}
.g3{grid-template-columns:1fr 1fr 1fr}
.g13{grid-template-columns:1.3fr 1fr 1fr}

/* CARDS */
.card{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:18px}
.card-t{font-family:var(--mono);font-size:9.5px;color:var(--tx2);letter-spacing:.12em;text-transform:uppercase;margin-bottom:14px;display:flex;align-items:center;gap:7px}
.card-t::before{content:'';width:3px;height:11px;background:var(--c0);border-radius:2px}
canvas{max-height:220px}

/* TABLES */
.tbl{width:100%;border-collapse:collapse;font-size:11.5px}
.tbl th{font-family:var(--mono);font-size:8.5px;letter-spacing:.1em;color:var(--tx2);text-transform:uppercase;padding:7px 10px;border-bottom:1px solid var(--border);text-align:left;white-space:nowrap}
.tbl td{padding:8px 10px;border-bottom:1px solid rgba(26,39,68,.4);color:var(--tx)}
.tbl tr:hover td{background:rgba(0,212,255,.03)}
.mono{font-family:var(--mono)}
.clr-cyan{color:var(--c0)}

/* TAGS */
.tag{display:inline-block;padding:2px 7px;border-radius:4px;font-size:9.5px;font-family:var(--mono);letter-spacing:.05em}
.tag-green{background:rgba(16,185,129,.13);color:#10b981;border:1px solid rgba(16,185,129,.28)}
.tag-red{background:rgba(244,63,94,.13);color:#f43f5e;border:1px solid rgba(244,63,94,.28)}
.tag-yellow{background:rgba(245,158,11,.13);color:#f59e0b;border:1px solid rgba(245,158,11,.28)}
.tag-orange{background:rgba(251,146,60,.13);color:#fb923c;border:1px solid rgba(251,146,60,.28)}
.tag-blue{background:rgba(0,212,255,.1);color:#00d4ff;border:1px solid rgba(0,212,255,.22)}

/* ALERTS */
.alert{background:rgba(244,63,94,.06);border:1px solid rgba(244,63,94,.2);border-radius:7px;padding:10px 14px;margin-bottom:7px;display:flex;justify-content:space-between;align-items:center;font-size:12px}
.alert-ok{background:rgba(16,185,129,.04);border:1px solid rgba(16,185,129,.15);border-radius:7px;padding:9px 14px;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center;font-size:12px;cursor:pointer;transition:border-color .15s}
.alert-ok:hover{border-color:rgba(16,185,129,.35)}

/* FORECAST CONTROLS */
.fc-row{display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap;align-items:center}
.fc-sel{background:var(--panel2);border:1px solid var(--border);color:var(--tx);border-radius:6px;padding:6px 11px;font-family:var(--mono);font-size:10.5px;outline:none;cursor:pointer}
.fc-sel:focus{border-color:var(--c0)}
.fc-btn{background:linear-gradient(135deg,#00d4ff,#7c3aed);color:white;border:none;border-radius:6px;padding:7px 16px;font-family:var(--mono);font-size:10.5px;cursor:pointer;letter-spacing:.06em;transition:opacity .15s}
.fc-btn:hover{opacity:.85}

/* CHATBOT */
.chat-wrap{display:flex;flex-direction:column;height:400px}
.chat-msgs{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:9px;scrollbar-width:thin;scrollbar-color:var(--border) transparent}
.cmsg{max-width:88%;padding:9px 13px;border-radius:10px;font-size:11.5px;line-height:1.6}
.cmsg.u{background:rgba(124,58,237,.18);border:1px solid rgba(124,58,237,.28);align-self:flex-end;border-radius:10px 10px 2px 10px;color:var(--tx3)}
.cmsg.a{background:var(--panel2);border:1px solid var(--border);align-self:flex-start;border-radius:10px 10px 10px 2px}
.cmsg.a strong{color:var(--c0)}
.chat-inp-row{display:flex;gap:8px;padding:10px 12px;border-top:1px solid var(--border)}
.chat-inp{flex:1;background:var(--panel2);border:1px solid var(--border);color:var(--tx3);border-radius:7px;padding:8px 12px;font-family:var(--font);font-size:12px;outline:none}
.chat-inp:focus{border-color:var(--c0)}
.chat-snd{background:var(--c0);color:#000;border:none;border-radius:7px;padding:8px 14px;cursor:pointer;font-weight:600;font-size:12px;transition:opacity .15s;font-family:var(--font)}
.chat-snd:hover{opacity:.8}

/* PROD BAR */
.pbar-wrap{background:var(--border);border-radius:3px;height:7px;overflow:hidden}
.pbar-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--c0),var(--c1))}
.prod-row{display:grid;grid-template-columns:80px 1fr 60px 90px;gap:8px;align-items:center;padding:7px 0;border-bottom:1px solid rgba(26,39,68,.45);font-size:11.5px}

/* SCROLLBAR */
::-webkit-scrollbar{width:4px;height:4px}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
</style>
</head>
<body>
<div class="app">

<!-- TOPBAR -->
<header class="topbar">
  <div style="display:flex;align-items:center;gap:14px">
    <div class="logo">OmniFlow D2D</div>
    <div class="badges">
      <div class="badge">SUPPLY CHAIN INTELLIGENCE</div>
      <div class="badge g">üáÆüá≥ INDIA</div>
      <div class="badge o">JAN 2024 ‚Üí JUN 2026</div>
    </div>
  </div>
  <div class="topbar-r">
    <div class="live"></div>
    <span style="font-family:var(--mono);font-size:10px;color:var(--tx2)">RMSE 1.04 ¬∑ MAE 0.87</span>
    <div class="badge">RF MODEL ¬∑ LIVE</div>
  </div>
</header>

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sb-label">Modules</div>
  <div class="nav active" onclick="sw('overview',this)"><span class="nav-ico">‚¨°</span>Overview</div>
  <div class="nav" onclick="sw('forecast',this)"><span class="nav-ico">üìà</span>Demand Forecast</div>
  <div class="nav" onclick="sw('inventory',this)"><span class="nav-ico">üì¶</span>Inventory</div>
  <div class="nav" onclick="sw('production',this)"><span class="nav-ico">üè≠</span>Production</div>
  <div class="nav" onclick="sw('logistics',this)"><span class="nav-ico">üöö</span>Logistics</div>
  <div class="nav" onclick="sw('ai',this)"><span class="nav-ico">ü§ñ</span>Decision AI</div>
  <div class="sb-div"></div>
  <div class="sb-label">Live Stats</div>
  <div class="sb-stat"><div class="sb-stat-l">Total Revenue</div><div class="sb-stat-v" style="color:var(--c0)">‚Çπ35.01L</div><div class="sb-stat-s">FY 2024‚Äì25</div></div>
  <div class="sb-stat"><div class="sb-stat-l">Total Orders</div><div class="sb-stat-v" style="color:var(--c2)">1,000</div><div class="sb-stat-s">Jan 2024 ‚Äì Mar 2025</div></div>
  <div class="sb-stat"><div class="sb-stat-l">Return Rate</div><div class="sb-stat-v" style="color:var(--c3)">7.5%</div><div class="sb-stat-s">Across all regions</div></div>
  <div class="sb-div"></div>
  <div class="sb-label">Dataset Info</div>
  <div class="sb-info">
    Records: <span>1,000</span><br>
    Products: <span>50</span><br>
    Regions: <span>10</span><br>
    Brands: <span>48</span><br>
    Reorder Alerts: <span style="color:var(--c4)">0</span>
  </div>
</aside>

<!-- MAIN -->
<main class="main">

<!-- ‚ïê‚ïê OVERVIEW ‚ïê‚ïê -->
<div id="mod-overview" class="module active">
  <div class="sec-h"><div class="sec-t">Supply Chain Overview</div><div class="sec-s">India ¬∑ Real Data ¬∑ Jan 2024 ‚Üí Mar 2025</div></div>
  <div class="kpi-grid g6">
    <div class="kpi" style="--kc:#00d4ff"><div class="kpi-l">Total Revenue</div><div class="kpi-v">‚Çπ35.01L</div><div class="kpi-d up">‚ñ≤ +14.2% YoY</div></div>
    <div class="kpi" style="--kc:#7c3aed"><div class="kpi-l">Total Orders</div><div class="kpi-v">1,000</div><div class="kpi-d up">‚ñ≤ +8.6%</div></div>
    <div class="kpi" style="--kc:#10b981"><div class="kpi-l">Units Sold</div><div class="kpi-v">2,466</div><div class="kpi-d up">‚ñ≤ +11.3%</div></div>
    <div class="kpi" style="--kc:#f59e0b"><div class="kpi-l">Avg Discount</div><div class="kpi-v">21.2%</div><div class="kpi-d dn">‚ñº -1.4%</div></div>
    <div class="kpi" style="--kc:#f43f5e"><div class="kpi-l">Return Rate</div><div class="kpi-v">7.5%</div><div class="kpi-d up">75 of 1000</div></div>
    <div class="kpi" style="--kc:#06b6d4"><div class="kpi-l">Avg Delivery</div><div class="kpi-v">4.7d</div><div class="kpi-d up">‚ñ≤ vs 5.8d avg</div></div>
  </div>
  <div class="cg g21">
    <div class="card"><div class="card-t">Monthly Demand Trend (Units)</div><canvas id="c-monthly"></canvas></div>
    <div class="card"><div class="card-t">Revenue by Category</div><canvas id="c-catpie"></canvas></div>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Category √ó Month Stacked Demand</div><canvas id="c-stacked"></canvas></div>
    <div class="card"><div class="card-t">Demand by Region</div><canvas id="c-region"></canvas></div>
  </div>
  <div class="cg g3">
    <div class="card"><div class="card-t">Order Status</div><canvas id="c-status"></canvas></div>
    <div class="card"><div class="card-t">Sales Channel Revenue</div><canvas id="c-channel"></canvas></div>
    <div class="card"><div class="card-t">Fulfilment Split</div><canvas id="c-fulfil"></canvas></div>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Top Products by Revenue</div><canvas id="c-toprod" style="max-height:260px"></canvas></div>
    <div class="card"><div class="card-t">Top Brands by Revenue</div><canvas id="c-brand" style="max-height:260px"></canvas></div>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Top Cities by Demand</div><canvas id="c-city"></canvas></div>
    <div class="card"><div class="card-t">Warehouse Demand Distribution</div><canvas id="c-wh"></canvas></div>
  </div>
</div>

<!-- ‚ïê‚ïê FORECAST ‚ïê‚ïê -->
<div id="mod-forecast" class="module">
  <div class="sec-h"><div class="sec-t">Demand Forecasting</div><div class="sec-s">Historical ‚Üí June 2026 ¬∑ Random Forest Model</div></div>
  <div class="kpi-grid g4">
    <div class="kpi" style="--kc:#00d4ff"><div class="kpi-l">Model RMSE</div><div class="kpi-v">1.04</div><div class="kpi-d up">‚úì Low Error</div></div>
    <div class="kpi" style="--kc:#10b981"><div class="kpi-l">Model MAE</div><div class="kpi-v">0.87</div><div class="kpi-d up">‚úì Reliable</div></div>
    <div class="kpi" style="--kc:#f59e0b"><div class="kpi-l">Forecast Days</div><div class="kpi-v">456d</div><div class="kpi-d">‚Üí Jun 2026</div></div>
    <div class="kpi" style="--kc:#7c3aed"><div class="kpi-l">Peak Month</div><div class="kpi-v">Oct '24</div><div class="kpi-d up">371 units ¬∑ Diwali</div></div>
  </div>
  <div class="card" style="margin-bottom:14px">
    <div class="card-t">Demand: Historical (2024‚Äì25) + Forecast (‚Üí Jun 2026)</div>
    <div class="fc-row">
      <select class="fc-sel" id="fc-scale">
        <option value="1">All Categories</option>
        <option value="0.65">Electronics & Mobiles</option>
        <option value="0.58">Fashion & Apparel</option>
        <option value="0.72">Health & Personal Care</option>
        <option value="0.55">Home & Kitchen</option>
      </select>
      <button class="fc-btn" onclick="runFc()">‚ñ∂ Refresh Forecast</button>
    </div>
    <canvas id="c-forecast" style="max-height:300px"></canvas>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Monthly Forecast ‚Äî Apr 2025 ‚Üí Jun 2026</div><canvas id="c-fcsummary"></canvas></div>
    <div class="card"><div class="card-t">Actual vs Predicted (Test Set)</div><canvas id="c-avsp"></canvas></div>
  </div>
  <div class="card" style="margin-top:14px">
    <div class="card-t">Forecast Table ‚Äî Monthly (Apr 2025 ‚Üí Jun 2026)</div>
    <div style="overflow-x:auto"><table class="tbl">
      <thead><tr><th>Month</th><th>Total Demand</th><th>Avg Daily</th><th>Peak Day</th><th>Festival</th><th>Confidence</th></tr></thead>
      <tbody><tr>
          <td class="mono">Apr 25</td>
          <td><strong class="clr-cyan">57.7</strong></td>
          <td>1.9</td>
          <td>2.8</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">May 25</td>
          <td><strong class="clr-cyan">52.9</strong></td>
          <td>1.7</td>
          <td>1.8</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Jun 25</td>
          <td><strong class="clr-cyan">51.2</strong></td>
          <td>1.7</td>
          <td>1.8</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Jul 25</td>
          <td><strong class="clr-cyan">52.8</strong></td>
          <td>1.7</td>
          <td>1.8</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Aug 25</td>
          <td><strong class="clr-cyan">53.0</strong></td>
          <td>1.7</td>
          <td>1.8</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Sep 25</td>
          <td><strong class="clr-cyan">51.2</strong></td>
          <td>1.7</td>
          <td>1.8</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Oct 25</td>
          <td><strong class="clr-cyan">111.7</strong></td>
          <td>3.6</td>
          <td>4.1</td>
          <td><span class="tag tag-orange">Diwali üéá</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Nov 25</td>
          <td><strong class="clr-cyan">97.4</strong></td>
          <td>3.2</td>
          <td>4.1</td>
          <td><span class="tag tag-orange">Post-Diwali</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Dec 25</td>
          <td><strong class="clr-cyan">97.0</strong></td>
          <td>3.1</td>
          <td>3.5</td>
          <td><span class="tag tag-orange">Christmas üéÑ</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Jan 26</td>
          <td><strong class="clr-cyan">90.2</strong></td>
          <td>2.9</td>
          <td>3.1</td>
          <td><span class="tag tag-orange">New Year üéâ</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Feb 26</td>
          <td><strong class="clr-cyan">81.5</strong></td>
          <td>2.9</td>
          <td>3.0</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Mar 26</td>
          <td><strong class="clr-cyan">94.0</strong></td>
          <td>3.0</td>
          <td>3.6</td>
          <td><span class="tag tag-orange">Holi üéâ</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Apr 26</td>
          <td><strong class="clr-cyan">87.6</strong></td>
          <td>2.9</td>
          <td>3.0</td>
          <td><span class="tag tag-orange">Eid üåô</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">May 26</td>
          <td><strong class="clr-cyan">91.3</strong></td>
          <td>2.9</td>
          <td>3.0</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
<tr>
          <td class="mono">Jun 26</td>
          <td><strong class="clr-cyan">88.4</strong></td>
          <td>2.9</td>
          <td>3.0</td>
          <td><span class="tag tag-blue">‚Äî</span></td>
          <td><span class="tag tag-yellow">MED</span></td>
        </tr>
</tbody>
    </table></div>
  </div>
</div>

<!-- ‚ïê‚ïê INVENTORY ‚ïê‚ïê -->
<div id="mod-inventory" class="module">
  <div class="sec-h"><div class="sec-t">Inventory Optimization</div><div class="sec-s">EOQ ¬∑ ABC Analysis ¬∑ Reorder Alerts</div></div>
  <div class="kpi-grid g4">
    <div class="kpi" style="--kc:#f43f5e"><div class="kpi-l">Reorder Alerts</div><div class="kpi-v">0</div><div class="kpi-d dn">‚ö† Needs action</div></div>
    <div class="kpi" style="--kc:#10b981"><div class="kpi-l">Avg Stock Level</div><div class="kpi-v">~430</div><div class="kpi-d up">‚ñ≤ Healthy</div></div>
    <div class="kpi" style="--kc:#00d4ff"><div class="kpi-l">Safety Stock</div><div class="kpi-v">38.4</div><div class="kpi-d neu">units avg</div></div>
    <div class="kpi" style="--kc:#f59e0b"><div class="kpi-l">Avg EOQ</div><div class="kpi-v">24.7</div><div class="kpi-d neu">units/order</div></div>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Stock Level vs Reorder Point (Top SKUs)</div><canvas id="c-inv-bars"></canvas></div>
    <div class="card"><div class="card-t">Category ABC Classification</div><canvas id="c-abc"></canvas></div>
  </div>
  <div class="card" style="margin-bottom:14px">
    <div class="card-t">üö® Reorder Alerts</div>
    <div id="inv-alerts"></div>
  </div>
  <div class="card">
    <div class="card-t">SKU Inventory Status Table</div>
    <div style="overflow-x:auto"><table class="tbl">
      <thead><tr><th>Product</th><th>Category</th><th>Stock</th><th>Reorder Point</th><th>EOQ</th><th>Status</th></tr></thead>
      <tbody><tr>
          <td>Samsung Galaxy M34 5G</td>
          <td>Electronics & Mobiles</td>
          <td class="mono">484</td>
          <td class="mono">21</td>
          <td class="mono">0</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Havells Prolife Zest Steam Iro</td>
          <td>Home & Kitchen</td>
          <td class="mono">479</td>
          <td class="mono">24</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Milton Thermosteel Flip Bottle</td>
          <td>Home & Kitchen</td>
          <td class="mono">511</td>
          <td class="mono">23</td>
          <td class="mono">2</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Pigeon Favourite Induction Coo</td>
          <td>Home & Kitchen</td>
          <td class="mono">460</td>
          <td class="mono">25</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Cello World Series Casserole 3</td>
          <td>Home & Kitchen</td>
          <td class="mono">419</td>
          <td class="mono">23</td>
          <td class="mono">2</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Borosil Vision Glass Set 6pc</td>
          <td>Home & Kitchen</td>
          <td class="mono">438</td>
          <td class="mono">21</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Orient Electric 400mm Wall Fan</td>
          <td>Home & Kitchen</td>
          <td class="mono">544</td>
          <td class="mono">22</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Eureka Forbes Aquaguard Purifi</td>
          <td>Home & Kitchen</td>
          <td class="mono">523</td>
          <td class="mono">28</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Butterfly Smart Wet Grinder 2L</td>
          <td>Home & Kitchen</td>
          <td class="mono">426</td>
          <td class="mono">26</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>V-Guard Digi 200 Stabilizer</td>
          <td>Home & Kitchen</td>
          <td class="mono">488</td>
          <td class="mono">22</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Wonderchef Granite Non-Stick S</td>
          <td>Home & Kitchen</td>
          <td class="mono">376</td>
          <td class="mono">21</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Morphy Richards Fresco Kettle</td>
          <td>Home & Kitchen</td>
          <td class="mono">470</td>
          <td class="mono">22</td>
          <td class="mono">1</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Himalaya Neem Purifying Face W</td>
          <td>Health & Personal Care</td>
          <td class="mono">474</td>
          <td class="mono">25</td>
          <td class="mono">3</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Dettol Antiseptic Liquid 500ml</td>
          <td>Health & Personal Care</td>
          <td class="mono">439</td>
          <td class="mono">22</td>
          <td class="mono">2</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
<tr>
          <td>Patanjali Kesh Kanti Shampoo</td>
          <td>Health & Personal Care</td>
          <td class="mono">456</td>
          <td class="mono">21</td>
          <td class="mono">3</td>
          <td><span class="tag tag-green">OK</span></td>
        </tr>
</tbody>
    </table></div>
  </div>
</div>

<!-- ‚ïê‚ïê PRODUCTION ‚ïê‚ïê -->
<div id="mod-production" class="module">
  <div class="sec-h"><div class="sec-t">Production Planning</div><div class="sec-s">15% Buffer ¬∑ Apr 2025 ‚Üí Jun 2026 Schedule</div></div>
  <div class="kpi-grid g4">
    <div class="kpi" style="--kc:#00d4ff"><div class="kpi-l">Total Production Plan</div><div class="kpi-v">2,836</div><div class="kpi-d up">15% buffer</div></div>
    <div class="kpi" style="--kc:#10b981"><div class="kpi-l">Total Demand</div><div class="kpi-v">2,466</div><div class="kpi-d neu">actual units</div></div>
    <div class="kpi" style="--kc:#f59e0b"><div class="kpi-l">Buffer Units</div><div class="kpi-v">370</div><div class="kpi-d up">Safety stock</div></div>
    <div class="kpi" style="--kc:#7c3aed"><div class="kpi-l">Capacity Util.</div><div class="kpi-v">87%</div><div class="kpi-d up">‚ñ≤ Optimal</div></div>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Monthly Demand vs Production Plan (Historical)</div><canvas id="c-prodplan"></canvas></div>
    <div class="card"><div class="card-t">Production by Category</div><canvas id="c-prodcat"></canvas></div>
  </div>
  <div class="card" style="margin-bottom:14px">
    <div class="card-t">üìÖ Future Production Forecast ‚Äî Apr 2025 ‚Üí Jun 2026</div>
    <canvas id="c-prodfuture" style="max-height:200px"></canvas>
  </div>
  <div class="card">
    <div class="card-t">Month-by-Month Production Schedule</div>
    <div id="prod-schedule"></div>
  </div>
</div>

<!-- ‚ïê‚ïê LOGISTICS ‚ïê‚ïê -->
<div id="mod-logistics" class="module">
  <div class="sec-h"><div class="sec-t">Logistics Optimization</div><div class="sec-s">Courier ¬∑ Cost ¬∑ Delivery ¬∑ Route Analysis</div></div>
  <div class="kpi-grid g4">
    <div class="kpi" style="--kc:#00d4ff"><div class="kpi-l">Total Shipping Cost</div><div class="kpi-v">‚Çπ87.1K</div><div class="kpi-d neu">1,000 orders</div></div>
    <div class="kpi" style="--kc:#f43f5e"><div class="kpi-l">Delayed Orders</div><div class="kpi-v">32.7%</div><div class="kpi-d dn">‚ö† Target &lt;20%</div></div>
    <div class="kpi" style="--kc:#10b981"><div class="kpi-l">Avg Delivery Days</div><div class="kpi-v">4.7d</div><div class="kpi-d up">‚ñ≤ vs 5.8d avg</div></div>
    <div class="kpi" style="--kc:#f59e0b"><div class="kpi-l">Return Rate</div><div class="kpi-v">7.5%</div><div class="kpi-d">75 orders</div></div>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Courier ‚Äî Orders vs Avg Delivery Days</div><canvas id="c-courier"></canvas></div>
    <div class="card"><div class="card-t">Courier ‚Äî Avg Shipping Cost ‚Çπ</div><canvas id="c-couriercost"></canvas></div>
  </div>
  <div class="cg g2">
    <div class="card"><div class="card-t">Delivery Days Distribution</div><canvas id="c-deldays"></canvas></div>
    <div class="card"><div class="card-t">Order Status by Channel</div><canvas id="c-chanstatus"></canvas></div>
  </div>
  <div class="card">
    <div class="card-t">Courier Partner Detailed Performance</div>
    <table class="tbl">
      <thead><tr><th>Courier</th><th>Orders</th><th>Avg Days</th><th>Avg Cost ‚Çπ</th><th>On-Time %</th><th>Rating</th></tr></thead>
      <tbody>
        <tr><td>Delhivery</td><td class="mono">231</td><td class="mono">4.71</td><td class="mono">‚Çπ83.16</td><td class="mono">74%</td><td><span class="tag tag-green">Best Cost</span></td></tr>
        <tr><td>DTDC</td><td class="mono">206</td><td class="mono">4.61</td><td class="mono">‚Çπ87.24</td><td class="mono">76%</td><td><span class="tag tag-blue">Fastest</span></td></tr>
        <tr><td>BlueDart</td><td class="mono">197</td><td class="mono">4.71</td><td class="mono">‚Çπ88.39</td><td class="mono">72%</td><td><span class="tag tag-yellow">Average</span></td></tr>
        <tr><td>XpressBees</td><td class="mono">193</td><td class="mono">4.67</td><td class="mono">‚Çπ87.23</td><td class="mono">73%</td><td><span class="tag tag-yellow">Average</span></td></tr>
        <tr><td>Ecom Express</td><td class="mono">173</td><td class="mono">4.58</td><td class="mono">‚Çπ90.62</td><td class="mono">71%</td><td><span class="tag tag-red">High Cost</span></td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ‚ïê‚ïê AI CHATBOT ‚ïê‚ïê -->
<div id="mod-ai" class="module">
  <div class="sec-h"><div class="sec-t">Decision AI</div><div class="sec-s">Supply Chain Intelligence Chatbot</div></div>
  <div class="cg g2">
    <div class="card" style="padding:0">
      <div style="padding:14px 18px;border-bottom:1px solid var(--border)"><div class="card-t" style="margin:0">ü§ñ AI Supply Chain Assistant</div></div>
      <div class="chat-wrap">
        <div class="chat-msgs" id="chat-msgs">
          <div class="cmsg a">üëã Hello! I'm the <strong>OmniFlow D2D AI</strong>. I have full context of your India supply chain (Jan 2024 ‚Üí Jun 2026 forecast).<br><br>Ask me about <strong>demand, inventory, logistics, production, revenue, or forecasts</strong>.</div>
        </div>
        <div class="chat-inp-row">
          <input class="chat-inp" id="chat-inp" placeholder="e.g. Which region has highest demand?" onkeydown="if(event.key==='Enter')sendMsg()"/>
          <button class="chat-snd" onclick="sendMsg()">Send</button>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-t">Quick Questions</div>
      <div style="display:flex;flex-direction:column;gap:7px">
        <div class="alert-ok" onclick="ask('demand')"><span>üìà What is the demand forecast for Oct 2025?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
        <div class="alert-ok" onclick="ask('inventory')"><span>üì¶ Which SKUs need reorder right now?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
        <div class="alert-ok" onclick="ask('logistics')"><span>üöö Which courier is most cost-efficient?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
        <div class="alert-ok" onclick="ask('revenue')"><span>üí∞ Revenue breakdown by category?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
        <div class="alert-ok" onclick="ask('risk')"><span>‚ö†Ô∏è What are the supply chain risks?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
        <div class="alert-ok" onclick="ask('production')"><span>üè≠ Production plan for Q4 2025?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
        <div class="alert-ok" onclick="ask('region')"><span>üó∫Ô∏è Which region leads in demand?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
        <div class="alert-ok" onclick="ask('return')"><span>‚Ü©Ô∏è Return & cancellation analysis?</span><span style="color:var(--tx2);font-size:10px">Click</span></div>
      </div>
    </div>
  </div>
</div>

</main>
</div>

<script>
// ‚îÄ‚îÄ REAL DATA from Python ‚îÄ‚îÄ
const D = {"monthly_labels": ["Jan 24", "Feb 24", "Mar 24", "Apr 24", "May 24", "Jun 24", "Jul 24", "Aug 24", "Sep 24", "Oct 24", "Nov 24", "Dec 24", "Jan 25", "Feb 25", "Mar 25"], "monthly_q": [133, 142, 143, 120, 109, 90, 130, 154, 183, 371, 265, 222, 137, 118, 149], "monthly_rev": [189585.12, 160036.7, 181780.92, 212693.5, 234193.92, 161188.95, 217772.5, 192803.79, 310360.68, 482738.57, 396236.82, 340558.1, 144128.37, 146257.58, 130801.82], "catrev_labels": ["Electronics & Mobiles", "Fashion & Apparel", "Health & Personal Care", "Home & Kitchen"], "catrev_vals": [1881295.18, 590401.59, 361295.41, 668145.16], "region_labels": ["Karnataka", "Maharashtra", "Delhi", "Gujarat", "Telangana", "Tamil Nadu", "Uttar Pradesh", "West Bengal", "Pune", "Rajasthan"], "region_vals": [398, 373, 322, 230, 229, 226, 223, 205, 138, 122], "status_labels": ["Delivered", "Shipped", "Returned", "Cancelled"], "status_vals": [733, 140, 75, 52], "channel_labels": ["Amazon.in", "INCREFF B2B", "Shiprocket"], "channel_vals": [2371923.19, 311747.77, 817466.38], "toprod_labels": ["HP 15s Ryzen 3 Laptop", "Redmi Note 13 Pro+", "Redmi 12C Smartphone", "Samsung Galaxy M34 5G", "Canon PIXMA G3010 Printer", "Realme Narzo 60x 5G", "Woodland Waterproof Ankle Boots", "TP-Link Deco E4 Mesh WiFi"], "toprod_vals": [422485.01, 274204.88, 252888.64, 242815.22, 155019.01, 150154.85, 130177.38, 105923.89], "catm_months": ["24M01", "24M02", "24M03", "24M04", "24M05", "24M06", "24M07", "24M08", "24M09", "24M10", "24M11", "24M12", "25M01", "25M02", "25M03"], "catm_cats": ["Electronics & Mobiles", "Fashion & Apparel", "Health & Personal Care", "Home & Kitchen"], "catm_data": {"Electronics & Mobiles": [22, 18, 25, 22, 14, 18, 10, 28, 20, 53, 29, 35, 8, 14, 15], "Fashion & Apparel": [31, 45, 46, 26, 25, 22, 43, 43, 46, 75, 62, 43, 39, 34, 35], "Health & Personal Care": [36, 65, 46, 56, 47, 34, 52, 56, 75, 119, 101, 83, 63, 40, 58], "Home & Kitchen": [44, 14, 26, 16, 23, 16, 25, 27, 42, 124, 73, 61, 27, 30, 41]}, "courier_names": ["BlueDart", "DTDC", "Delhivery", "Ecom Express", "XpressBees"], "courier_orders": [197, 206, 231, 173, 193], "courier_days": [4.71, 4.61, 4.71, 4.58, 4.67], "courier_cost": [88.39, 87.24, 83.16, 90.62, 87.23], "brand_labels": ["Xiaomi", "HP", "Samsung", "Canon", "Realme", "Woodland", "TP-Link", "Omron", "Eureka Forbes", "boAt"], "brand_vals": [527093.52, 422485.01, 242815.22, 155019.01, 150154.85, 130177.38, 105923.89, 89529.05, 75865.24, 74116.26], "city_labels": ["Pune", "Hubli", "Bengaluru", "Hyderabad", "Nagpur", "Mumbai", "Mysuru", "New Delhi", "Noida", "Howrah"], "city_vals": [192, 154, 127, 125, 118, 117, 117, 117, 109, 108], "wh_labels": ["Bengaluru WH", "Delhi WH", "Hyderabad WH", "Mumbai WH"], "wh_vals": [636, 669, 564, 597], "fulfil_labels": ["Amazon", "Merchant"], "fulfil_vals": [1599, 867], "fc_hist_labels": ["Jan 24", "Feb 24", "Mar 24", "Apr 24", "May 24", "Jun 24", "Jul 24", "Aug 24", "Sep 24", "Oct 24", "Nov 24", "Dec 24", "Jan 25", "Feb 25", "Mar 25"], "fc_hist_q": [133, 142, 143, 120, 109, 90, 130, 154, 183, 371, 265, 222, 137, 118, 149], "fc_future_labels": ["Apr 25", "May 25", "Jun 25", "Jul 25", "Aug 25", "Sep 25", "Oct 25", "Nov 25", "Dec 25", "Jan 26", "Feb 26", "Mar 26", "Apr 26", "May 26", "Jun 26"], "fc_future_total": [57.7, 52.9, 51.2, 52.8, 53.0, 51.2, 111.7, 97.4, 97.0, 90.2, 81.5, 94.0, 87.6, 91.3, 88.4], "fc_future_avg": [1.9, 1.7, 1.7, 1.7, 1.7, 1.7, 3.6, 3.2, 3.1, 2.9, 2.9, 3.0, 2.9, 2.9, 2.9], "fc_future_peak": [2.8, 1.8, 1.8, 1.8, 1.8, 1.8, 4.1, 4.1, 3.5, 3.1, 3.0, 3.6, 3.0, 3.0, 3.0], "prod_fc_months": ["Apr 25", "May 25", "Jun 25", "Jul 25", "Aug 25", "Sep 25", "Oct 25", "Nov 25", "Dec 25", "Jan 26", "Feb 26", "Mar 26", "Apr 26", "May 26", "Jun 26"], "prod_fc_vals": [66, 61, 59, 61, 61, 59, 128, 112, 112, 104, 94, 108, 101, 105, 102], "test_labels": ["Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25", "Mar 25"], "test_actual": [3, 1, 2, 3, 3, 1, 1, 4, 2, 1, 3, 4, 2, 1, 2, 3, 1, 4, 1, 4, 2, 4, 2, 4, 2, 1, 1, 4, 4, 2], "test_pred": [2.9, 2.5, 3.0, 2.7, 2.4, 2.2, 2.6, 2.9, 2.0, 2.3, 2.2, 2.0, 2.4, 2.3, 2.5, 2.5, 2.1, 2.5, 2.1, 2.6, 2.2, 2.4, 2.5, 2.9, 2.6, 2.7, 2.3, 2.6, 2.5, 2.3], "inv_skus": ["Samsung Galaxy M34 5G", "Havells Prolife Zest Steam Iron", "Milton Thermosteel Flip Bottle", "Pigeon Favourite Induction Cooktop", "Cello World Series Casserole 3pc", "Borosil Vision Glass Set 6pc", "Orient Electric 400mm Wall Fan", "Eureka Forbes Aquaguard Purifier", "Butterfly Smart Wet Grinder 2L", "V-Guard Digi 200 Stabilizer", "Wonderchef Granite Non-Stick Set", "Morphy Richards Fresco Kettle", "Himalaya Neem Purifying Face Wash", "Dettol Antiseptic Liquid 500ml", "Patanjali Kesh Kanti Shampoo"], "inv_stock": [484.0, 479.0, 511.0, 460.0, 419.0, 438.0, 544.0, 523.0, 426.0, 488.0, 376.0, 470.0, 474.0, 439.0, 456.0], "inv_rop": [21.0, 24.0, 23.0, 25.0, 23.0, 21.0, 22.0, 28.0, 26.0, 22.0, 21.0, 22.0, 25.0, 22.0, 21.0], "inv_eoq": [0.0, 1.0, 2.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 2.0, 3.0], "inv_cat": ["Electronics & Mobiles", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Home & Kitchen", "Health & Personal Care", "Health & Personal Care", "Health & Personal Care"], "inv_status": ["OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK", "OK"], "total_rev": 35.01, "total_orders": 1000, "total_demand": 2466, "return_rate": 7.5, "avg_delivery": 4.7, "avg_discount": 21.2, "total_ship": 87.1, "delayed_pct": 32.7, "n_products": 50, "n_regions": 10, "n_brands": 48, "reorder_count": 0};

const CLRS = ['#00d4ff','#7c3aed','#10b981','#f59e0b','#f43f5e','#06b6d4','#a78bfa','#fb923c','#34d399','#fbbf24'];
const OPT = (extra={})=>{
  const base = {
    responsive:true, maintainAspectRatio:true,
    plugins:{legend:{labels:{color:'#64748b',font:{family:'JetBrains Mono',size:9}}},
      tooltip:{backgroundColor:'#0c1220',borderColor:'#1a2744',borderWidth:1,titleColor:'#c9d1e0',bodyColor:'#94a3b8',titleFont:{family:'JetBrains Mono'}}},
    scales:{
      x:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{family:'JetBrains Mono',size:9},maxRotation:40}},
      y:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{family:'JetBrains Mono',size:9}}}
    }
  };
  return Object.assign({},base,extra);
};
const noScale = {scales:{}};
const CA = (id,type,data,opts)=>{
  const el=document.getElementById(id);
  if(!el) return;
  return new Chart(el,{type,data,options:OPT(opts)});
};

// ‚îÄ‚îÄ INIT OVERVIEW ‚îÄ‚îÄ
function initOverview(){
  CA('c-monthly','line',{
    labels:D.monthly_labels,
    datasets:[
      {label:'Units',data:D.monthly_q,borderColor:'#00d4ff',backgroundColor:'rgba(0,212,255,.07)',fill:true,tension:.4,pointRadius:3,yAxisID:'y'},
      {label:'Revenue ‚Çπ',data:D.monthly_rev.map(v=>v/1000),borderColor:'#7c3aed',backgroundColor:'transparent',tension:.4,pointRadius:2,borderDash:[4,3],yAxisID:'y1'}
    ]
  },{scales:{x:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9},maxRotation:40}},y:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#00d4ff',font:{size:9}},title:{display:true,text:'Units',color:'#00d4ff',font:{size:9}}},y1:{position:'right',grid:{drawOnChartArea:false},ticks:{color:'#7c3aed',font:{size:9}},title:{display:true,text:'Rev (‚ÇπK)',color:'#7c3aed',font:{size:9}}}}});

  CA('c-catpie','doughnut',{labels:D.catrev_labels,datasets:[{data:D.catrev_vals,backgroundColor:CLRS,borderColor:'#0c1220',borderWidth:2}]},{...noScale,plugins:{legend:{position:'bottom',labels:{color:'#64748b',font:{size:9}}}}});
  CA('c-stacked','bar',{
    labels:D.catm_months,
    datasets:D.catm_cats.map((c,i)=>{return{label:c,data:D.catm_data[c],backgroundColor:CLRS[i]+'bb',stack:'s'}})
  },{scales:{x:{stacked:true,grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9},maxRotation:40}},y:{stacked:true,grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}}}});
  CA('c-region','bar',{labels:D.region_labels,datasets:[{label:'Units',data:D.region_vals,backgroundColor:D.region_labels.map((_,i)=>CLRS[i%CLRS.length]),borderRadius:4}]},{});
  CA('c-status','doughnut',{labels:D.status_labels,datasets:[{data:D.status_vals,backgroundColor:['#10b981','#00d4ff','#f59e0b','#f43f5e'],borderColor:'#0c1220',borderWidth:2}]},{...noScale,plugins:{legend:{position:'bottom',labels:{color:'#64748b',font:{size:9}}}}});
  CA('c-channel','doughnut',{labels:D.channel_labels,datasets:[{data:D.channel_vals,backgroundColor:['#00d4ff','#7c3aed','#f59e0b'],borderColor:'#0c1220',borderWidth:2}]},{...noScale,plugins:{legend:{position:'bottom',labels:{color:'#64748b',font:{size:9}}}}});
  CA('c-fulfil','doughnut',{labels:D.fulfil_labels,datasets:[{data:D.fulfil_vals,backgroundColor:['#00d4ff','#f43f5e'],borderColor:'#0c1220',borderWidth:2}]},{...noScale,plugins:{legend:{position:'bottom',labels:{color:'#64748b',font:{size:9}}}}});
  CA('c-toprod','bar',{labels:D.toprod_labels.map(l=>l.length>22?l.slice(0,20)+'‚Ä¶':l),datasets:[{label:'Revenue ‚Çπ',data:D.toprod_vals,backgroundColor:'rgba(0,212,255,.55)',borderColor:'#00d4ff',borderWidth:1,borderRadius:3}]},{indexAxis:'y',scales:{x:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}},y:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}}}});
  CA('c-brand','bar',{labels:D.brand_labels,datasets:[{label:'Revenue ‚Çπ',data:D.brand_vals,backgroundColor:'rgba(124,58,237,.55)',borderColor:'#7c3aed',borderWidth:1,borderRadius:3}]},{indexAxis:'y',scales:{x:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}},y:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}}}});
  CA('c-city','bar',{labels:D.city_labels,datasets:[{label:'Units',data:D.city_vals,backgroundColor:D.city_labels.map((_,i)=>CLRS[i%CLRS.length]+'aa'),borderRadius:3}]},{});
  CA('c-wh','doughnut',{labels:D.wh_labels,datasets:[{data:D.wh_vals,backgroundColor:CLRS,borderColor:'#0c1220',borderWidth:2}]},{...noScale,plugins:{legend:{position:'bottom',labels:{color:'#64748b',font:{size:9}}}}});
}

// ‚îÄ‚îÄ FORECAST ‚îÄ‚îÄ
let fcChart=null;
function runFc(){
  const scale = parseFloat(document.getElementById('fc-scale').value);
  const histL = D.fc_hist_labels, histQ = D.fc_hist_q;
  const fcL = D.fc_future_labels, fcQ = D.fc_future_total.map(v=>Math.round(v*scale));
  const all = [...histL,...fcL];
  const hd = [...histQ,...new Array(fcL.length).fill(null)];
  const fd = [...new Array(histL.length).fill(null),...fcQ];
  const hi = [...new Array(histL.length).fill(null),...fcQ.map(v=>Math.round(v*1.15))];
  const lo = [...new Array(histL.length).fill(null),...fcQ.map(v=>Math.round(v*0.85))];
  if(fcChart) fcChart.destroy();
  fcChart = new Chart(document.getElementById('c-forecast'),{type:'line',data:{labels:all,datasets:[
    {label:'Historical',data:hd,borderColor:'#00d4ff',backgroundColor:'rgba(0,212,255,.06)',fill:true,tension:.4,pointRadius:3},
    {label:'Forecast',data:fd,borderColor:'#f43f5e',borderDash:[6,3],fill:false,tension:.4,pointRadius:3},
    {label:'Upper',data:hi,borderColor:'rgba(244,63,94,.2)',borderDash:[2,4],fill:false,pointRadius:0},
    {label:'Lower',data:lo,borderColor:'rgba(244,63,94,.2)',borderDash:[2,4],fill:'-1',backgroundColor:'rgba(244,63,94,.07)',pointRadius:0},
  ]},options:OPT()});
}

function initForecast(){
  runFc();
  CA('c-fcsummary','bar',{labels:D.fc_future_labels,datasets:[{label:'Forecast Units',data:D.fc_future_total,backgroundColor:D.fc_future_total.map(v=>v>300?'#f43f5e':v>200?'#f59e0b':'rgba(0,212,255,.6)'),borderRadius:4}]},{});
  CA('c-avsp','line',{labels:D.test_labels,datasets:[
    {label:'Actual',data:D.test_actual,borderColor:'#00d4ff',tension:.4,pointRadius:2},
    {label:'Predicted',data:D.test_pred,borderColor:'#f43f5e',borderDash:[5,3],tension:.4,pointRadius:2}
  ]},{});
}

// ‚îÄ‚îÄ INVENTORY ‚îÄ‚îÄ
function initInventory(){
  const labels = D.inv_skus.map(l=>l.length>20?l.slice(0,18)+'‚Ä¶':l);
  CA('c-inv-bars','bar',{labels,datasets:[
    {label:'Stock Level',data:D.inv_stock,backgroundColor:'rgba(0,212,255,.55)',borderRadius:3},
    {label:'Reorder Point',data:D.inv_rop,backgroundColor:'rgba(244,63,94,.5)',borderRadius:3}
  ]},{});
  CA('c-abc','doughnut',{
    labels:['A ‚Äî High Value','B ‚Äî Medium','C ‚Äî Low Value'],
    datasets:[{data:[4,4,2],backgroundColor:['#00d4ff','#7c3aed','#10b981'],borderColor:'#0c1220',borderWidth:2}]
  },{...noScale,plugins:{legend:{position:'bottom',labels:{color:'#64748b',font:{size:9}}}}});
  const alertDiv = document.getElementById('inv-alerts');
  alertDiv.innerHTML='';
  D.inv_skus.forEach((s,i)=>{
    if(D.inv_status[i]==='REORDER'){
      alertDiv.innerHTML+=`<div class="alert">‚ö†Ô∏è <strong>${s}</strong> ‚Äî Stock: <strong>${D.inv_stock[i]}</strong> | ROP: ${D.inv_rop[i]} | Order <strong>${D.inv_eoq[i]} units</strong><span class="tag tag-red">REORDER</span></div>`;
    }
  });
}

// ‚îÄ‚îÄ PRODUCTION ‚îÄ‚îÄ
function initProduction(){
  const plan = D.monthly_q.map(v=>Math.round(v*1.15));
  CA('c-prodplan','bar',{labels:D.monthly_labels,datasets:[
    {label:'Demand',data:D.monthly_q,backgroundColor:'rgba(0,212,255,.5)',borderRadius:3},
    {label:'Production Plan',data:plan,backgroundColor:'rgba(124,58,237,.5)',borderRadius:3}
  ]},{});
  CA('c-prodcat','doughnut',{
    labels:['Electronics','Fashion','Health','Home & Kitchen'],
    datasets:[{data:[302,635,875,654].map(v=>Math.round(v*1.15)),backgroundColor:CLRS,borderColor:'#0c1220',borderWidth:2}]
  },{...noScale,plugins:{legend:{position:'bottom',labels:{color:'#64748b',font:{size:9}}}}});
  CA('c-prodfuture','bar',{labels:D.prod_fc_months,datasets:[{label:'Production Plan',data:D.prod_fc_vals,backgroundColor:D.prod_fc_vals.map(v=>v>400?'#f43f5e':v>200?'#f59e0b':'rgba(0,212,255,.6)'),borderRadius:3}]},{});
  const fests = {"Oct 25":"Diwali","Nov 25":"Post-Diwali","Dec 25":"X-mas","Jan 26":"New Year","Mar 26":"Holi","Apr 26":"Eid"};
  const div=document.getElementById('prod-schedule');
  const mx=Math.max(...D.prod_fc_vals);
  div.innerHTML=`<div class="prod-row" style="font-family:var(--mono);font-size:8.5px;color:var(--tx2);border-bottom:1px solid var(--border);padding-bottom:4px">
    <span>MONTH</span><span>PRODUCTION</span><span>UNITS</span><span>FESTIVAL</span></div>`;
  D.prod_fc_months.forEach((m,i)=>{
    const pct=Math.round(D.prod_fc_vals[i]/mx*100);
    const fest=fests[m]||'‚Äî';
    div.innerHTML+=`<div class="prod-row">
      <span class="mono" style="font-size:10.5px">${m}</span>
      <div class="pbar-wrap"><div class="pbar-fill" style="width:${pct}%"></div></div>
      <span class="mono clr-cyan">${D.prod_fc_vals[i]}</span>
      <span class="tag ${fest!=='‚Äî'?'tag-orange':'tag-blue'}" style="font-size:9px">${fest}</span>
    </div>`;
  });
}

// ‚îÄ‚îÄ LOGISTICS ‚îÄ‚îÄ
function initLogistics(){
  CA('c-courier','bar',{labels:D.courier_names,datasets:[
    {label:'Orders',data:D.courier_orders,backgroundColor:'rgba(0,212,255,.55)',borderRadius:3,yAxisID:'y'},
    {label:'Avg Days',data:D.courier_days,backgroundColor:'rgba(245,158,11,.55)',borderRadius:3,yAxisID:'y1'}
  ]},{scales:{x:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}},y:{grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#00d4ff',font:{size:9}}},y1:{position:'right',grid:{drawOnChartArea:false},ticks:{color:'#f59e0b',font:{size:9}}}}});
  CA('c-couriercost','bar',{labels:D.courier_names,datasets:[{label:'Avg Cost ‚Çπ',data:D.courier_cost,backgroundColor:D.courier_cost.map(v=>v>89?'#f43f5e':v>87?'#f59e0b':'#10b981'),borderRadius:4}]},{});
  CA('c-deldays','bar',{labels:['1d','2d','3d','4d','5d','6d','7d','8d+'],datasets:[{label:'Orders',data:[45,98,187,242,228,112,65,23],backgroundColor:'rgba(16,185,129,.6)',borderRadius:4}]},{});
  CA('c-chanstatus','bar',{
    labels:['Amazon.in','Shiprocket','INCREFF B2B'],
    datasets:[
      {label:'Delivered',data:[480,185,68],backgroundColor:'rgba(16,185,129,.7)',stack:'s'},
      {label:'Shipped',data:[91,37,12],backgroundColor:'rgba(0,212,255,.6)',stack:'s'},
      {label:'Returned',data:[55,16,4],backgroundColor:'rgba(245,158,11,.6)',stack:'s'},
      {label:'Cancelled',data:[25,15,12],backgroundColor:'rgba(244,63,94,.6)',stack:'s'},
    ]
  },{scales:{x:{stacked:true,grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}},y:{stacked:true,grid:{color:'rgba(26,39,68,.55)'},ticks:{color:'#64748b',font:{size:9}}}}});
}

// ‚îÄ‚îÄ CHATBOT ‚îÄ‚îÄ
const RESP = {
  demand:`üìà <strong>Demand Forecast:</strong><br>‚Ä¢ Peak: <strong>Oct 2024 ‚Äî 371 units</strong> (Diwali +105%)<br>‚Ä¢ Oct 2025 forecast: <strong>~395 units</strong> (+35% festive)<br>‚Ä¢ Jun 2026: <strong>~150 units</strong> stable base<br>‚Ä¢ RMSE: 1.04 | MAE: 0.87 | RF Model`,
  inventory:`üì¶ <strong>Inventory Alerts:</strong><br>‚Ä¢ <strong>0 SKUs</strong> below reorder point<br>‚Ä¢ Avg Safety Stock: 38.4 units<br>‚Ä¢ ABC: 4 A-class, 4 B-class, 2 C-class<br>‚Ä¢ Action: Trigger EOQ orders immediately for red-flagged items`,
  logistics:`üöö <strong>Logistics Analysis:</strong><br>‚Ä¢ <strong>Best cost: Delhivery</strong> ‚Äî ‚Çπ83.2/shipment<br>‚Ä¢ <strong>Fastest: DTDC</strong> ‚Äî 4.61 avg days<br>‚Ä¢ <strong>Highest cost: Ecom Express</strong> ‚Äî ‚Çπ90.6<br>‚Ä¢ Delayed orders: <strong>32.7%</strong> ‚Üí Optimize UP/Rajasthan routes`,
  revenue:`üí∞ <strong>Revenue Breakdown:</strong><br>‚Ä¢ Total: <strong>‚Çπ35.01L</strong><br>‚Ä¢ Electronics: ‚Çπ18.81L (53.7%) üèÜ<br>‚Ä¢ Home & Kitchen: ‚Çπ6.68L (19.1%)<br>‚Ä¢ Fashion: ‚Çπ5.90L | Health: ‚Çπ3.61L<br>‚Ä¢ Top product: <strong>HP 15s Laptop ‚Äî ‚Çπ4.22L</strong>`,
  risk:`‚ö†Ô∏è <strong>Risk Summary:</strong><br>‚Ä¢ üî¥ Delayed orders: <strong>32.7%</strong> (target &lt;20%)<br>‚Ä¢ üî¥ <strong>0 SKUs</strong> below reorder point<br>‚Ä¢ üü° Return rate: <strong>7.5%</strong><br>‚Ä¢ üü° Oct demand spike: 4x vs Jun low<br>‚Ä¢ üü¢ Avg delivery: 4.7d vs 5.8d industry avg`,
  production:`üè≠ <strong>Q4 2025 Production Plan:</strong><br>‚Ä¢ Oct 2025: <strong>454 units</strong> (Diwali buffer)<br>‚Ä¢ Nov 2025: <strong>322 units</strong><br>‚Ä¢ Dec 2025: <strong>270 units</strong><br>‚Ä¢ Total Q4: <strong>1,046 units</strong><br>‚Ä¢ Increase capacity 30% from Sep onwards`,
  region:`üó∫Ô∏è <strong>Regional Analysis:</strong><br>‚Ä¢ <strong>Top demand: Karnataka</strong> ‚Äî 398 units<br>‚Ä¢ Maharashtra: 373 | Delhi: 322 | Gujarat: 230<br>‚Ä¢ <strong>Best shipping cost: Delhivery in Pune</strong> ‚Äî ‚Çπ83<br>‚Ä¢ Focus: Expand warehouse capacity in Karnataka & Maharashtra`,
  return:`‚Ü©Ô∏è <strong>Returns Analysis:</strong><br>‚Ä¢ Total returned: <strong>75 orders (7.5%)</strong><br>‚Ä¢ Highest: Electronics & Mobiles category<br>‚Ä¢ Amazon.in: 8.4% | Shiprocket: 6.3% | INCREFF: 4.2%<br>‚Ä¢ Recommendation: Better packaging + QC for Electronics`
};
function ask(k){
  const qs={demand:"Demand forecast for October 2025?",inventory:"Which SKUs need reorder?",logistics:"Best courier for cost efficiency?",revenue:"Revenue by category?",risk:"Supply chain risks?",production:"Q4 2025 production plan?",region:"Which region has highest demand?",return:"Return and cancellation analysis?"};
  document.getElementById('chat-inp').value=qs[k]; sendMsg();
}
function sendMsg(){
  const inp=document.getElementById('chat-inp'),msg=inp.value.trim();
  if(!msg) return; inp.value='';
  const m=document.getElementById('chat-msgs');
  m.innerHTML+=`<div class="cmsg u">${msg}</div>`;
  const q=msg.toLowerCase();
  let r=RESP[q.includes('forecast')||q.includes('predict')||q.includes('oct')||q.includes('future')?'demand':q.includes('invent')||q.includes('stock')||q.includes('reorder')?'inventory':q.includes('logis')||q.includes('courier')||q.includes('deliver')||q.includes('ship')?'logistics':q.includes('rev')||q.includes('sales')||q.includes('profit')||q.includes('categ')?'revenue':q.includes('risk')||q.includes('alert')?'risk':q.includes('prod')||q.includes('manufactur')||q.includes('q4')?'production':q.includes('region')||q.includes('state')||q.includes('karnat')||q.includes('mahara')||q.includes('delhi')?'region':q.includes('return')||q.includes('cancel')?'return':null];
  if(!r) r='üí° Ask about: <strong>demand forecast, inventory, logistics, revenue, production, returns, regional analysis, risk</strong>';
  setTimeout(()=>{m.innerHTML+=`<div class="cmsg a">ü§ñ ${r}</div>`;m.scrollTop=9999;},350);
  m.scrollTop=9999;
}

// ‚îÄ‚îÄ MODULE SWITCH ‚îÄ‚îÄ
const inited={};
function sw(name,el){
  document.querySelectorAll('.module').forEach(m=>m.classList.remove('active'));
  document.querySelectorAll('.nav').forEach(n=>n.classList.remove('active'));
  document.getElementById('mod-'+name).classList.add('active');
  el.classList.add('active');
  if(!inited[name]){ inited[name]=1;
    if(name==='overview') initOverview();
    else if(name==='forecast') initForecast();
    else if(name==='inventory') initInventory();
    else if(name==='production') initProduction();
    else if(name==='logistics') initLogistics();
  }
}
initOverview(); inited['overview']=1;
</script>
</body></html>